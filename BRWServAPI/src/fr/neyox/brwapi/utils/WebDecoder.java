package fr.neyox.brwapi.utils;

import javax.xml.crypto.Data;

import fr.neyox.brwapi.stats.BattleRoyalStats;
import fr.neyox.brwapi.stats.BrainFFAStats;
import fr.neyox.brwapi.stats.FFARushStats;
import fr.neyox.brwapi.stats.PlagiatStats;
import fr.neyox.brwapi.stats.PracticeStats;
import fr.neyox.brwapi.stats.RushFightStats;

public class WebDecoder {
	
	public static final String TITLE_NO_FOUND = "BRWServ - Page introuvable";

	public static String getTitle(String content) {
		String title = null;
		if (content.contains("<title>") && content.contains("</title>")) {
			title = content;
			title = content.split("<title>")[1];
			String str2 = title.split("</title>")[0];
			title = str2;
		}
		return title;
	}
	
	//Ôªø<!doctype html><html lang="fr"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">    <meta http-equiv="X-UA-Compatible" content="ie=edge">    <title>BRWServ - Profil de Saynni</title>    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>    <script src="https://brwserv.net/assets/utils/Chart.bundle.js"></script>    <link rel="icon" type="image/png" href="/assets/images/logo.png" />    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">    <link href="https://brwserv.net/assets/css/style.css" rel="stylesheet"></head><body>    <header>        <img src="https://brwserv.net/assets/images/logo.png" alt="BRWServ Logo" />        <span id="navbar_responsive"><i class="fas fa-bars"></i></span>        <nav class="top-nav">            <ul>                <a href="/"><li>Accueil</li></a>                <a href="/classement"><li>Classement</li></a>                <a href="/stats"><li>Statistiques</li></a>                <a href="/shop"><li class="shop">Boutique</li></a>            </ul>        </nav>    </header>    <nav id="navbar-responsive-open" class="responsive-nav">        <ul>            <a href="/"><li>Accueil</li></a>            <a href="/classement"><li>Classement</li></a>            <a href="/stats"><li>Statistiques</li></a>            <a href="/shop"><li>Boutique</li></a>        </ul>    </nav>    <main>    <div class="profil-bc">        <div class="profl-pp">            <img src="https://cdn.brwserv.net/get/1601016990451/Saynni" alt="Saynni" />            <span class="conneted off"><i class="fas fa-circle"></i></span>        </div>        <div class="info">            <h1><span class="rank"><span style="background: linear-gradient(0.25turn, #be0000,#ff5c5c);">Admin ‚?§</span></span> Saynni</h1>                            <span class="badges">                                                                                                                                    <span badge="Confinement 2020" class="confinement"><i class="fas fa-radiation-alt"></i></span>                                                                                                                                                                <span badge="IRL" class="confinement"><i class="fab fa-pagelines"></i></span>                                                                                                        </span>                        <p>Inscrit le 03/03/2019 √† 20:40</p>        </div>            </div>    <!--<nav class="profil-nav">        <ul>            <li id="stats"><i class="far fa-chart-bar"></i> Statistiques</li>            <li id="friends"><i class="fas fa-user-friends"></i> Amis</li>        </ul>    </nav>-->    <div class="profil-divs">        <div section="stats" class="states">            <h1 class="total-game">Temps de jeu total <span>2601</span> heure(s)</h1>            <div class="stats-div">                                                            <div class="stat-div practice">                            <h1>Practice</h1>                            <div class="contents">                                                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Gapple</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo NoDebuff</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Archer</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Sumo</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Iron</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Diamond</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Combo</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo MCSG</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Axe</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Soup</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo UHC</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo Debuff</p>                                            <span>1000</span>                                        </div>                                                                                                                                                                                        <div class="content practice">                                            <p>Elo BuildUHC</p>                                            <span>1000</span>                                        </div>                                                                                                                                </div>                        </div>                                                                                <div class="stat-div rushfight">                            <h1>RushFight</h1>                            <div class="contents">                                                                                                    <div class="content">                                        <p>Kills</p>                                        <span>8</span>                                    </div>                                                                            <div class="content">                                            <p>Parties gagn√©es</p>                                            <span>0</span>                                        </div>                                        <div class="content">                                            <p>Parties perdues</p>                                            <span>6</span>                                        </div>                                                                        <div class="content">                                        <p>Morts</p>                                        <span>6</span>                                    </div>                                    <div class="content">                                        <p>Temps de jeu</p>                                        <span>2 heure(s)</span>                                    </div>                                                            </div>                        </div>                                                                                <div class="stat-div ">                            <h1>Ffarush</h1>                            <div class="contents">                                                                                                    <div class="content">                                        <p>Kills</p>                                        <span>29</span>                                    </div>                                                                        <div class="content">                                        <p>Morts</p>                                        <span>37</span>                                    </div>                                    <div class="content">                                        <p>Temps de jeu</p>                                        <span>180 heure(s)</span>                                    </div>                                                            </div>                        </div>                                                                                <div class="stat-div ">                            <h1>Brainffa</h1>                            <div class="contents">                                                                                                    <div class="content">                                        <p>Kills</p>                                        <span>34</span>                                    </div>                                                                        <div class="content">                                        <p>Morts</p>                                        <span>42</span>                                    </div>                                    <div class="content">                                        <p>Temps de jeu</p>                                        <span>52 heure(s)</span>                                    </div>                                                            </div>                        </div>                                                                                <div class="stat-div ">                            <h1>Battleroyal</h1>                            <div class="contents">                                                                                                    <div class="content">                                        <p>Kills</p>                                        <span>31</span>                                    </div>                                                                        <div class="content">                                        <p>Morts</p>                                        <span>38</span>                                    </div>                                    <div class="content">                                        <p>Temps de jeu</p>                                        <span>17 heure(s)</span>                                    </div>                                                            </div>                        </div>                                                                                <div class="stat-div ">                            <h1>Plagiat</h1>                            <div class="contents">                                                                                                    <div class="content">                                        <p>Kills</p>                                        <span>1</span>                                    </div>                                                                        <div class="content">                                        <p>Morts</p>                                        <span>0</span>                                    </div>                                    <div class="content">                                        <p>Temps de jeu</p>                                        <span>18 heure(s)</span>                                    </div>                                                            </div>                        </div>                                                </div>        </div>        <!--<div section="friends" class="friends">            <h1 class="total-game">Ami(e)s <span>0</span></h1>            <div class="friends-div">                                    <p>Ce joueur n'a aucun ami...</p>                            </div>        </div>-->    </div>    <script src="https://brwserv.net/views/profil/profilManager.js"></script></main>    <footer>        <div class="wrapper">            <div class="wrapper-right">                <ul>                    <a href="https://twitter.com/brwserv?lang=fr"><li><i class="fab fa-twitter"></i></li></a>                    <a href="https://discord.gg/Fsrqwxy"><li><i class="fab fa-discord"></i></li></a>                </ul>            </div>            <div class="wrapper-midd">                <img src="https://brwserv.net/assets/images/logo.png" alt="logo" />            </div>            <div class="wrappe-left">                <a href="/cguv">Conditions g√©n√©rales d'utilisation et de vente</a>            </div>        </div>        <div class="copyright-div">            <p class="copyright">&copy; BRWSERV 2020 - Tous droits r√©serv√©s</p>        </div>    </footer>    <script src="https://brwserv.net/views/Layout/LayoutManager.js"></script>    <script src="https://brwserv.net/assets/utils/Cookies.js"></script></body></html>
	public static String getRank(String content, String name) {
		String rank = null;
		if (content.contains("</span></span> "+name+"</h1>")) {
			String s1 = content.split("</span></span> "+name+"</h1>")[0];
			rank = s1.split(">")[s1.split(">").length-1];
		}
		return rank;
	}

	public static int getPlayTime(String content) {
		int playTime = 0;
		if (content.contains("</span> heure(s)</h1>")) {
			String s1 = content.split("</span> heure(s)</h1>")[0];
			String s2 = s1.split("<h1 class=\"total-game\">Temps de jeu total <span>")[1];
			String s3 = s2.split("</span> ")[0];
			playTime = getInt(s3);
		}
		return playTime;
	}
	////<div class="stat-div rushfight">                            <h1>RushFight</h1>                            <div class="contents">                                                                                                    <div class="content">                                        <p>Kills</p>                                        <span>8</span>                                    </div>                                                                            
	public static RushFightStats getRushFight(String content) {
		String kills = content.split("<h1>RushFight</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		String wingames = content.split("<div class=\"content\">                                            <p>Parties gagn√©es</p>                                            <span>")[1].split("</span>                                        </div> ")[0];
		String losegames = content.split("<div class=\"content\">                                            <p>Parties perdues</p>                                            <span>")[1].split("</span>                                        </div>")[0];
		String deaths = content.split("<div class=\"content\">                                        <p>Morts</p>                                        <span>")[1].split("</span>                                    </div>")[0];
		String playTime = content.split("<div class=\"content\">                                        <p>Temps de jeu</p>                                        <span>")[1].split("</span>                                    </div>")[0];
		return new RushFightStats(getInt(kills), getInt(deaths), playTime,getInt(wingames),getInt(losegames));
	}
	
	//<div class="stat-div ">                            <h1>Ffarush</h1>                            <div class="contents">                                                                                                    <div class="content">                                        <p>Kills</p>                                        <span>29</span>                                    </div>                                                                        <div class="content">                                        <p>Morts</p>                                        <span>37</span>                                    </div>                                    <div class="content">                                        <p>Temps de jeu</p>                                        <span>180 heure(s)</span>                                    </div>                                                            </div>                        </div>
	public static FFARushStats getFFARush(String content) {
		String kills = content.split("<div class=\"stat-div \">                            <h1>Ffarush</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>")[1].split("</span>                                    </div>")[0];
		String deaths = content.split("<div class=\"stat-div \">                            <h1>Ffarush</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		String playTime = content.split("<div class=\"stat-div \">                            <h1>Ffarush</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>"+deaths+"</span>                                    </div>                                    <div class=\"content\">                                        <p>Temps de jeu</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		return new FFARushStats(getInt(kills), getInt(deaths), playTime);
	}
	
	public static BrainFFAStats getBrainFFA(String content) {
		String kills = content.split("<div class=\"stat-div \">                            <h1>Brainffa</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>")[1].split("</span>                                    </div>")[0];
		String deaths = content.split("<div class=\"stat-div \">                            <h1>Brainffa</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		String playTime = content.split("<div class=\"stat-div \">                            <h1>Brainffa</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>"+deaths+"</span>                                    </div>                                    <div class=\"content\">                                        <p>Temps de jeu</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		return new BrainFFAStats(getInt(kills), getInt(deaths), playTime);
	}
	
	public static PlagiatStats getPlagiat(String content) {
		String kills = content.split("<div class=\"stat-div \">                            <h1>Plagiat</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>")[1].split("</span>                                    </div>")[0];
		String deaths = content.split("<div class=\"stat-div \">                            <h1>Plagiat</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		String playTime = content.split("<div class=\"stat-div \">                            <h1>Plagiat</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>"+deaths+"</span>                                    </div>                                    <div class=\"content\">                                        <p>Temps de jeu</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		return new PlagiatStats(getInt(kills), getInt(deaths), playTime);
	}
	
	//Battleroyal
	public static BattleRoyalStats getBattleRoyal(String content) {
		String kills = content.split("<div class=\"stat-div \">                            <h1>Battleroyal</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>")[1].split("</span>                                    </div>")[0];
		String deaths = content.split("<div class=\"stat-div \">                            <h1>Battleroyal</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		String playTime = content.split("<div class=\"stat-div \">                            <h1>Battleroyal</h1>                            <div class=\"contents\">                                                                                                    <div class=\"content\">                                        <p>Kills</p>                                        <span>"+kills+"</span>                                    </div>                                                                        <div class=\"content\">                                        <p>Morts</p>                                        <span>"+deaths+"</span>                                    </div>                                    <div class=\"content\">                                        <p>Temps de jeu</p>                                        <span>")[1].split("</span>                                    </div> ")[0];
		System.out.println(kills);
		return new BattleRoyalStats(getInt(kills), getInt(deaths), playTime);
	}
	
	public static PracticeStats getPracticeStats(String content) {
		content = content.trim();
		String apple = getStatsPractice(content, "Elo Gapple");
		String archer = getStatsPractice(content, "Elo Archer");
		String nodebuff = getStatsPractice(content, "Elo NoDebuff");
		String sumo = getStatsPractice(content, "Elo Sumo");
		String iron = getStatsPractice(content, "Elo Iron");
		String MCSG = getStatsPractice(content, "Elo MCSG");
		String axe = getStatsPractice(content, "Elo Axe");
		String soup = getStatsPractice(content, "Elo Soup");
		String uhc = getStatsPractice(content, "Elo UHC");
		String debuff = getStatsPractice(content, "Elo Debuff");
		String buildUhc = getStatsPractice(content, "Elo BuildUHC");
		String diamond = getStatsPractice(content, "Elo Diamond");
		String combo =  getStatsPractice(content, "Elo Combo"); 
		return new PracticeStats(getInt(apple), getInt(nodebuff), getInt(archer), getInt(sumo), getInt(iron), getInt(diamond), getInt(combo), getInt(MCSG), getInt(axe), getInt(soup), getInt(uhc), getInt(debuff), getInt(buildUhc));
	}
	
	private static String getStatsPractice(String content, String name) {
		return content.split("<p>"+name+"</p>                                            <span>")[1].split("</span>                                        </div>")[0];
	}
	
	private static int getInt(String str) {
		return Integer.valueOf(str);
	}


}
